<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta content="width=device-width, initial-scale=1.0" name="viewport">
    <meta content="Interactive crime visualization dashboard for Charlotte, NC" name="description">
    <title>Crime Lens of CLT</title>

    <!-- D3.js Library -->
    <script src="https://d3js.org/d3.v7.min.js"></script>

    <!-- Leaflet for map tiles -->
    <link href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" rel="stylesheet"/>
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>

    <!-- External Stylesheet -->
    <link href="styles.css" rel="stylesheet">
    <link href="favicon/favicon.ico" rel="icon" sizes="any">
</head>
<body>
<!-- Header Section -->
<header class="dashboard-header">
    <div class="container">
        <a class="brand" href="/">
            <img alt="Crime Lens of Charlotte"
                 decoding="async"
                 fetchpriority="high" height="150" src="/favicon/crime-lens-charlotte.svg" width="150"/>
        </a>
        <h1 class="dashboard-title" style="text-align: center;">Crime Lens of Charlotte</h1>
        <p class="dashboard-subtitle" style="text-align: center;">Exploring Crime in Charlotte</p>
    </div>
</header>

<!-- Main Dashboard Container -->
<main class="dashboard-main">
    <div class="container">

        <!-- Control Panel -->
        <section class="control-panel" id="controlPanel">
            <h2 class="section-title" style="text-align: center;">Filters & Controls</h2>

            <div class="control-grid">
                <!-- Date Range Filter -->
                <div class="control-group">
                    <label for="dateRange">Date Range</label>
                    <div class="date-inputs">
                        <input aria-label="Start date" id="startDate" name="startDate" type="date">
                        <span class="date-separator">to</span>
                        <input aria-label="End date" id="endDate" name="endDate" type="date">
                    </div>
                </div>

                <!-- Crime Type Filter -->
                <div class="control-group">
                    <label for="crimeType">Crime Type</label>
                    <span class="helper-text">Select one or Ctrl+Click for multiple</span>
                    <select aria-label="Select crime types" id="crimeType" multiple name="crimeType" size="8">
                        <option selected value="all">All Crime Types</option>
                        <option value="violent">Violent Crimes</option>
                        <option value="sex">Sex Crimes</option>
                        <option value="property">Property Crimes</option>
                        <option value="fraud">Fraud / Financial Crimes</option>
                        <option value="drug">Drug & Alcohol Offenses</option>
                        <option value="publicOrder">Public Order Crimes</option>
                        <option value="weapons">Weapons Offenses</option>
                        <option value="other">Special / Other Incidents</option>
                    </select>
                </div>

                <!-- ZIP Code Filter -->
                <div class="control-group">
                    <label for="zipCode">ZIP Code</label>
                    <select aria-label="Select ZIP code" id="zipCode" name="zipCode">
                        <option selected value="all">All ZIP Codes</option>
                        <!-- ZIP codes will be populated dynamically -->
                    </select>
                </div>

                <!-- Reset Button -->
                <div class="control-group">
                    <button aria-label="Reset all filters" class="btn-reset" id="resetFilters">
                        Reset Filters
                    </button>
                </div>
            </div>
        </section>

        <!-- Visualization Grid -->
        <div class="visualization-grid">

            <!-- Crime Map -->
            <section class="viz-panel viz-panel-large" id="mapPanel">
                <div class="panel-header">
                    <h2 class="panel-title">Crime Map</h2>
                    <div class="panel-controls">
                        <button aria-label="Toggle map view" class="btn-view-toggle" id="mapViewToggle">
                            <span class="view-option active" data-view="heatmap">All Incidents</span>
                            <span class="view-option" data-view="choropleth">Crime Density</span>
                            <span class="view-option" data-view="points">Individual Points</span>
                        </button>
                    </div>
                </div>
                <div class="panel-content">
                    <div id="mapVisualization" style="height: 600px; width: 100%;"></div>
                    <div class="map-legend" id="mapLegend"></div>
                </div>
            </section>

            <!-- Crime Trends Over Time -->
            <section class="viz-panel" id="trendPanel">
                <div class="panel-header">
                    <h2 class="panel-title">Crime Trends Over Time</h2>
                </div>
                <div class="panel-content">
                    <svg aria-label="Crime trend line chart" id="trendVisualization" role="img"></svg>
                </div>
            </section>

            <!-- Crime Type Distribution -->
            <section class="viz-panel" id="distributionPanel">
                <div class="panel-header">
                    <h2 class="panel-title">Crime Type Distribution</h2>
                </div>
                <div class="panel-content">
                    <svg aria-label="Crime type bar chart" id="distributionVisualization" role="img"></svg>
                </div>
            </section>
        </div>
    </div>
</main>

<!-- Footer -->
<footer class="dashboard-footer">
    <div class="container">
        <p>&copy; Crime Lens of Charlotte</p>
        <p>DATA 760: VISUALIZATION & COMMUNICATION</p>
        <p>Creator: Mahek Patel</p>
    </div>
</footer>

<!-- Tooltip (for interactive elements) -->
<div aria-hidden="true" class="tooltip" id="tooltip" role="tooltip"></div>

<!-- Loading Overlay -->
<div class="loading-overlay" id="loadingOverlay">
    <div class="loading-spinner"></div>
    <p class="loading-text">Loading crime data...</p>
</div>

<!-- D3 Visualization Script -->
<script src="visualization.js"></script>
</body>
</html>